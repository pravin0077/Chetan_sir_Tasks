link for install prometheus/node_exporter/garafana

https://www.linode.com/docs/guides/how-to-install-prometheus-and-grafana-on-ubuntu/


---------------------------------------------------------------Prometheus installation-------------------------------------------------------------------------

Step1 sudo apt-get update -y

----------------------------------------------------------------------------------------------------------------------------------------------------

Step 2 wget https://github.com/prometheus/prometheus/releases/download/v2.37.6/prometheus-2.37.6.linux-amd64.tar.gz

----------------------------------------------------------------------------------------------------------------------------------------------------

Step 3 Extract the archived Prometheus files.

tar xvfz prometheus-*.tar.gz

----------------------------------------------------------------------------------------------------------------------------------------------------

Step 4 (Optional) After the files have been extracted, delete the archive or move it to a different location for storage.

rm prometheus-*.tar.gz

----------------------------------------------------------------------------------------------------------------------------------------------------

Step 5 Create two new directories for Prometheus to use. The /etc/prometheus directory stores the Prometheus configuration files.
The /var/lib/prometheus directory holds application data.

sudo mkdir /etc/prometheus /var/lib/prometheus

----------------------------------------------------------------------------------------------------------------------------------------------------

Step 6 Move into the main directory of the extracted prometheus folder. Substitute the name of the actual directory in place of prometheus-2.37.6.linux-amd64.

cd prometheus-2.37.6.linux-amd64
----------------------------------------------------------------------------------------------------------------------------------------------------

Step 7 Move the prometheus and promtool directories to the /usr/local/bin/ directory. This makes Prometheus accessible to all users.

sudo mv prometheus promtool /usr/local/bin/
----------------------------------------------------------------------------------------------------------------------------------------------------

Step 8 Move the prometheus.yml YAML configuration file to the /etc/prometheus directory.

sudo mv prometheus.yml /etc/prometheus/prometheus.yml
----------------------------------------------------------------------------------------------------------------------------------------------------

Step 9 The consoles and console_libraries directories contain the resources necessary to create customized consoles.
This feature is more advanced and is not covered in this guide. However,
these files should also be moved to the etc/prometheus directory in case they are ever required.

sudo mv consoles/ console_libraries/ /etc/prometheus/
----------------------------------------------------------------------------------------------------------------------------------------------------

Step 10 Verify that Prometheus is successfully installed using the below command:

prometheus --version
----------------------------------------------------------------------------------------------------------------------------------------------------

---------------------------------------How to Configure Prometheus as a Service--------------------------------------------

Step 1 Create a prometheus user. The following command creates a system user

sudo useradd -rs /bin/false prometheus

----------------------------------------------------------------------------------------------------------------------------------------------------

Step 2 Assign ownership of the two directories created in the previous section to the new prometheus user.

sudo chown -R prometheus: /etc/prometheus /var/lib/prometheus
----------------------------------------------------------------------------------------------------------------------------------------------------

Step 3 To allow Prometheus to run as a service, create a prometheus.service file using the following command:

sudo vi /etc/systemd/system/prometheus.service
---------------------Enter the following content into the file: prometheus.service ---------------------

[Unit]
Description=Prometheus
Wants=network-online.target
After=network-online.target

[Service]
User=prometheus
Group=prometheus
Type=simple
Restart=on-failure
RestartSec=5s
ExecStart=/usr/local/bin/prometheus \
    --config.file /etc/prometheus/prometheus.yml \
    --storage.tsdb.path /var/lib/prometheus/ \
    --web.console.templates=/etc/prometheus/consoles \
    --web.console.libraries=/etc/prometheus/console_libraries \
    --web.listen-address=0.0.0.0:9090 \
    --web.enable-lifecycle \
    --log.level=info

[Install]
WantedBy=multi-user.target

----------------------------------------------------------------------------------------------------------------------------------------------------

Step 4 Reload the systemctl daemon.

sudo systemctl daemon-reload
----------------------------------------------------------------------------------------------------------------------------------------------------

Step 5 (Optional) Use systemctl enable to configure the prometheus service to automatically start when the system boots.
If this command is not added, Prometheus must be launched manually.

sudo systemctl enable prometheus
----------------------------------------------------------------------------------------------------------------------------------------------------

Step 6 Start the prometheus service and review the status command to ensure it is active.

sudo systemctl start prometheus
sudo systemctl status prometheus

(.....Note:-
If the prometheus service fails to start properly, run the command journalctl -u prometheus -f --no-pager and review the output for errors.....)

----------------------------------------------------------------------------------------------------------------------------------------------------

Step 7 Access the Prometheus web interface and dashboard at http://local_ip_addr:9090. Replace local_ip_addr with the address of the monitoring server.
Because Prometheus is using the default configuration file, it does not display much information yet.

http://local_ip_addr:9090   local ip is ypour server ip address

----------------------------------------------------------------------------------------------------------------------------------------------------

